{
  "id": "9c715df5-609a-491b-9327-04b9613f23e3",
  "revision": 0,
  "last_node_id": 188,
  "last_link_id": 339,
  "nodes": [
    {
      "id": 167,
      "type": "PrimitiveNode",
      "pos": [
        3590.909429228214,
        26925.503879879092
      ],
      "size": [
        394.9636640501758,
        63.489880453777005
      ],
      "flags": {},
      "order": 0,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "widget": {
            "name": "project_name"
          },
          "links": [
            302
          ]
        }
      ],
      "properties": {
        "Run widget replace on values": false
      },
      "widgets_values": [
        "Thorra-bike"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 168,
      "type": "PromptCombiner",
      "pos": [
        3282.5753213856196,
        26695.922813515714
      ],
      "size": [
        210,
        274
      ],
      "flags": {},
      "order": 20,
      "mode": 0,
      "inputs": [
        {
          "name": "text_1",
          "type": "STRING",
          "widget": {
            "name": "text_1"
          },
          "link": 304
        },
        {
          "name": "text_2",
          "shape": 7,
          "type": "STRING",
          "widget": {
            "name": "text_2"
          },
          "link": 320
        },
        {
          "name": "text_3",
          "shape": 7,
          "type": "STRING",
          "widget": {
            "name": "text_3"
          },
          "link": 317
        },
        {
          "name": "text_4",
          "shape": 7,
          "type": "STRING",
          "widget": {
            "name": "text_4"
          },
          "link": 314
        }
      ],
      "outputs": [
        {
          "name": "combined_text",
          "type": "STRING",
          "links": [
            303
          ]
        }
      ],
      "properties": {
        "Node name for S&R": "PromptCombiner"
      },
      "widgets_values": [
        "",
        "",
        "",
        "",
        ", "
      ]
    },
    {
      "id": 165,
      "type": "DF_Text_Box",
      "pos": [
        2734.0109578521165,
        26650.175879871735
      ],
      "size": [
        486.28365824006505,
        110.36743265016048
      ],
      "flags": {
        "collapsed": false
      },
      "order": 1,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "links": [
            304
          ]
        }
      ],
      "properties": {
        "cnr_id": "derfuu_comfyui_moddednodes",
        "ver": "d0905bed31249f2bd0814c67585cf4fe3c77c015",
        "Node name for S&R": "DF_Text_Box"
      },
      "widgets_values": [
        "Anime Style, power drifting low-podchair-design motorbike vehicle, female redhead agent lean-back, muscled-windshield"
      ],
      "color": "#232",
      "bgcolor": "#353"
    },
    {
      "id": 172,
      "type": "PromptLocationModifier",
      "pos": [
        2760.629032592201,
        26956.134842205647
      ],
      "size": [
        400,
        200
      ],
      "flags": {
        "collapsed": true
      },
      "order": 18,
      "mode": 0,
      "inputs": [
        {
          "name": "modifier_id",
          "type": "INT",
          "widget": {
            "name": "modifier_id"
          },
          "link": 315
        }
      ],
      "outputs": [
        {
          "name": "modified_prompt",
          "type": "STRING",
          "links": []
        }
      ],
      "properties": {
        "Node name for S&R": "PromptLocationModifier"
      },
      "widgets_values": [
        "",
        7,
        true
      ]
    },
    {
      "id": 171,
      "type": "PromptLightingModifier",
      "pos": [
        2761.076747713827,
        26907.512979996904
      ],
      "size": [
        400,
        200
      ],
      "flags": {
        "collapsed": true
      },
      "order": 17,
      "mode": 0,
      "inputs": [
        {
          "name": "modifier_id",
          "type": "INT",
          "widget": {
            "name": "modifier_id"
          },
          "link": 308
        }
      ],
      "outputs": [
        {
          "name": "modified_prompt",
          "type": "STRING",
          "links": []
        }
      ],
      "properties": {
        "Node name for S&R": "PromptLightingModifier"
      },
      "widgets_values": [
        "",
        7,
        true
      ]
    },
    {
      "id": 169,
      "type": "PromptActionModifier",
      "pos": [
        2763.66535514433,
        26816.80589635517
      ],
      "size": [
        400,
        200
      ],
      "flags": {
        "collapsed": true
      },
      "order": 19,
      "mode": 0,
      "inputs": [
        {
          "name": "modifier_id",
          "type": "INT",
          "widget": {
            "name": "modifier_id"
          },
          "link": 316
        }
      ],
      "outputs": [
        {
          "name": "modified_prompt",
          "type": "STRING",
          "links": []
        }
      ],
      "properties": {
        "Node name for S&R": "PromptActionModifier"
      },
      "widgets_values": [
        "",
        7,
        true
      ]
    },
    {
      "id": 170,
      "type": "SequentialNumberGenerator",
      "pos": [
        2241.9575501082077,
        26895.13055153108
      ],
      "size": [
        226.671484375,
        150
      ],
      "flags": {},
      "order": 2,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "value",
          "type": "INT",
          "links": []
        },
        {
          "name": "next",
          "type": "INT",
          "links": [
            308
          ]
        }
      ],
      "properties": {
        "cnr_id": "djz-nodes",
        "ver": "f6ca9376132600e6245d3d9d2f1e5d0ffa448d99",
        "Node name for S&R": "SequentialNumberGenerator"
      },
      "widgets_values": [
        3,
        8,
        32,
        "increment"
      ]
    },
    {
      "id": 174,
      "type": "SequentialNumberGenerator",
      "pos": [
        2484.5054510006876,
        26829.746101561286
      ],
      "size": [
        226.671484375,
        150
      ],
      "flags": {
        "collapsed": false
      },
      "order": 3,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "value",
          "type": "INT",
          "links": [
            315
          ]
        },
        {
          "name": "next",
          "type": "INT",
          "links": []
        }
      ],
      "properties": {
        "cnr_id": "djz-nodes",
        "ver": "f6ca9376132600e6245d3d9d2f1e5d0ffa448d99",
        "Node name for S&R": "SequentialNumberGenerator"
      },
      "widgets_values": [
        15,
        20,
        32,
        "increment"
      ]
    },
    {
      "id": 175,
      "type": "SequentialNumberGenerator",
      "pos": [
        2241.14566262147,
        26693.023914878828
      ],
      "size": [
        226.671484375,
        150
      ],
      "flags": {
        "collapsed": false
      },
      "order": 4,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "value",
          "type": "INT",
          "links": [
            316
          ]
        },
        {
          "name": "next",
          "type": "INT",
          "links": []
        }
      ],
      "properties": {
        "cnr_id": "djz-nodes",
        "ver": "f6ca9376132600e6245d3d9d2f1e5d0ffa448d99",
        "Node name for S&R": "SequentialNumberGenerator"
      },
      "widgets_values": [
        1,
        5,
        32,
        "increment"
      ]
    },
    {
      "id": 177,
      "type": "PromptMoodModifier",
      "pos": [
        3035.65828776327,
        26803.341073053398
      ],
      "size": [
        400,
        200
      ],
      "flags": {
        "collapsed": true
      },
      "order": 5,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "modified_prompt",
          "type": "STRING",
          "links": [
            320
          ]
        }
      ],
      "properties": {
        "Node name for S&R": "PromptMoodModifier"
      },
      "widgets_values": [
        "",
        5,
        true
      ]
    },
    {
      "id": 176,
      "type": "PromptWeatherModifier",
      "pos": [
        3034.762857520013,
        26859.753178378454
      ],
      "size": [
        400,
        200
      ],
      "flags": {
        "collapsed": true
      },
      "order": 6,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "modified_prompt",
          "type": "STRING",
          "links": [
            317
          ]
        }
      ],
      "properties": {
        "Node name for S&R": "PromptWeatherModifier"
      },
      "widgets_values": [
        "",
        20,
        true
      ]
    },
    {
      "id": 173,
      "type": "PromptColorGrading",
      "pos": [
        3038.748321368372,
        26913.611646303954
      ],
      "size": [
        400,
        200
      ],
      "flags": {
        "collapsed": true
      },
      "order": 7,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "modified_prompt",
          "type": "STRING",
          "links": [
            314
          ]
        }
      ],
      "properties": {
        "Node name for S&R": "PromptColorGrading"
      },
      "widgets_values": [
        "",
        8,
        true
      ]
    },
    {
      "id": 135,
      "type": "ImageScaleToTotalPixels",
      "pos": [
        2733.130864237744,
        27111.61775780609
      ],
      "size": [
        270,
        82
      ],
      "flags": {},
      "order": 21,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 258
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            334
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.74",
        "Node name for S&R": "ImageScaleToTotalPixels"
      },
      "widgets_values": [
        "nearest-exact",
        1
      ]
    },
    {
      "id": 137,
      "type": "ImageScaleToTotalPixels",
      "pos": [
        3043.130864237744,
        27101.61775780609
      ],
      "size": [
        270,
        82
      ],
      "flags": {},
      "order": 22,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 260
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            335
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.74",
        "Node name for S&R": "ImageScaleToTotalPixels"
      },
      "widgets_values": [
        "nearest-exact",
        1
      ]
    },
    {
      "id": 185,
      "type": "ImpactMakeImageBatch",
      "pos": [
        3343.130864237744,
        27271.61775780609
      ],
      "size": [
        156.6236328125,
        86
      ],
      "flags": {},
      "order": 24,
      "mode": 0,
      "inputs": [
        {
          "name": "image1",
          "type": "IMAGE",
          "link": 333
        },
        {
          "name": "image2",
          "type": "IMAGE",
          "link": 334
        },
        {
          "name": "image3",
          "type": "IMAGE",
          "link": 335
        },
        {
          "name": "image4",
          "type": "IMAGE",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            336,
            338
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfyui-impact-pack",
        "ver": "2346b677666e14ad53a6e65e16a33289a78106c7",
        "Node name for S&R": "ImpactMakeImageBatch"
      },
      "widgets_values": []
    },
    {
      "id": 156,
      "type": "OpenAIChatNode",
      "pos": [
        3596.345237188685,
        27107.10713469816
      ],
      "size": [
        400,
        222
      ],
      "flags": {},
      "order": 25,
      "mode": 4,
      "inputs": [
        {
          "name": "images",
          "shape": 7,
          "type": "IMAGE",
          "link": 336
        },
        {
          "name": "files",
          "shape": 7,
          "type": "OPENAI_INPUT_FILES",
          "link": null
        },
        {
          "name": "advanced_options",
          "shape": 7,
          "type": "OPENAI_CHAT_CONFIG",
          "link": 281
        },
        {
          "name": "prompt",
          "type": "STRING",
          "widget": {
            "name": "prompt"
          },
          "link": 303
        }
      ],
      "outputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "links": [
            283
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.74",
        "Node name for S&R": "OpenAIChatNode"
      },
      "widgets_values": [
        "power slide drifting low-podchair-design motorbike vehicle, female redhead agent lean-back, muscled-windshield",
        false,
        "gpt-5"
      ],
      "color": "#232",
      "bgcolor": "#353"
    },
    {
      "id": 157,
      "type": "OpenAIChatConfig",
      "pos": [
        3598.51316453311,
        27385.87937852227
      ],
      "size": [
        398.93819881754916,
        334.805411347621
      ],
      "flags": {
        "collapsed": false
      },
      "order": 8,
      "mode": 4,
      "inputs": [],
      "outputs": [
        {
          "name": "OPENAI_CHAT_CONFIG",
          "type": "OPENAI_CHAT_CONFIG",
          "links": [
            281
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.74",
        "Node name for S&R": "OpenAIChatConfig"
      },
      "widgets_values": [
        "auto",
        4096,
        "# JSON-Direct-Expert.md - System Prompt for Direct NLP to JSON Conversion\n\nYou are an expert at analyzing natural language prompts and converting them directly into FLUX.2-compliant structured JSON prompts. Your role is to produce clean, precise JSON output that can be immediately used with FLUX.2 image generation, without requiring ComfyUI or the node interface.\n\n---\n\n## Core Competencies\n\n1. **Natural Language Understanding** - Parse complex descriptive prompts\n2. **Semantic Extraction** - Identify scene, subjects, style, camera, and atmosphere\n3. **Color Intelligence** - Convert color descriptions to precise hex codes\n4. **Photography Knowledge** - Map descriptive intent to technical camera parameters\n5. **JSON Formatting Precision** - Output perfectly formatted, valid JSON\n\n---\n\n## FLUX.2 JSON Schema Specification\n\n### Complete Schema Structure\n```json\n{\n  \"scene\": \"string\",\n  \"subjects\": [\n    {\n      \"description\": \"string (REQUIRED)\",\n      \"position\": \"string (OPTIONAL)\",\n      \"action\": \"string (OPTIONAL)\",\n      \"pose\": \"string (OPTIONAL)\",\n      \"color_palette\": [\"array of hex codes or color names\"]\n    }\n  ],\n  \"style\": \"string\",\n  \"color_palette\": [\"global array of hex codes or color names\"],\n  \"lighting\": \"string\",\n  \"mood\": \"string\",\n  \"background\": \"string\",\n  \"composition\": \"string\",\n  \"camera\": {\n    \"angle\": \"string\",\n    \"distance\": \"string\",\n    \"lens\": \"string (OPTIONAL - prefer lens-mm)\",\n    \"lens-mm\": number,\n    \"f-number\": \"string (format: f/X.X)\",\n    \"ISO\": number,\n    \"depth_of_field\": \"string\",\n    \"focus\": \"string\"\n  }\n}\n```\n\n---\n\n## CRITICAL FORMATTING RULES\n\n### Data Type Requirements\n- ✅ **scene**: string\n- ✅ **subjects**: array of objects\n- ✅ **subjects[].description**: string (REQUIRED - only required field)\n- ✅ **subjects[].position**: string (optional)\n- ✅ **subjects[].action**: string (optional)\n- ✅ **subjects[].pose**: string (optional)\n- ✅ **subjects[].color_palette**: array of strings\n- ✅ **style**: string\n- ✅ **color_palette**: array of strings (global)\n- ✅ **lighting**: string\n- ✅ **mood**: string\n- ✅ **background**: string\n- ✅ **composition**: string\n- ✅ **camera**: object\n- ✅ **camera.angle**: string\n- ✅ **camera.distance**: string\n- ✅ **camera.lens**: string (avoid - use lens-mm)\n- ✅ **camera.lens-mm**: number (NOT string)\n- ✅ **camera.f-number**: string (format: \"f/2.8\")\n- ✅ **camera.ISO**: number (NOT string)\n- ✅ **camera.depth_of_field**: string\n- ✅ **camera.focus**: string\n\n### Format Examples\n```json\n// ✅ CORRECT\n{\n  \"lens-mm\": 85,\n  \"f-number\": \"f/2.8\",\n  \"ISO\": 400\n}\n\n// ❌ INCORRECT\n{\n  \"lens-mm\": \"85\",        // ❌ Should be number\n  \"f-number\": 2.8,        // ❌ Should be string \"f/2.8\"\n  \"ISO\": \"400\"            // ❌ Should be number\n}\n```\n\n### Hex Code Formatting\n- ✅ Uppercase: `#FF5733`\n- ❌ Lowercase: `#ff5733`\n- ✅ Full 6 digits: `#FF5733`\n- ❌ Short form: `#F73`\n- ✅ Array: `[\"#FF5733\", \"#C70039\"]`\n- ❌ Not in array: `\"#FF5733, #C70039\"`\n\n### Field Naming\n- ✅ `lens-mm` (with hyphen)\n- ❌ `lens_mm` (underscore)\n- ✅ `f-number` (with hyphen)\n- ❌ `f_number` (underscore)\n- ✅ `color_palette` (underscore)\n- ❌ `color-palette` (hyphen)\n- ✅ `depth_of_field` (underscores)\n- ❌ `depth-of-field` (hyphens)\n\n---\n\n## Parameter Ranges and Values\n\n### Camera Specifications\n```json\n{\n  \"lens-mm\": 16-400,      // 16 (ultra-wide) to 400 (super-telephoto)\n  \"f-number\": \"f/1.4\" to \"f/16\",  // Common values: f/1.4, f/1.8, f/2.8, f/4, f/5.6, f/8, f/11, f/16\n  \"ISO\": 100-6400         // Common values: 100, 200, 400, 800, 1600, 3200, 6400\n}\n```\n\n### Distance Vocabulary\n- \"Extreme close-up\" / \"Macro\"\n- \"Close-up\"\n- \"Medium shot\"\n- \"Full shot\"\n- \"Wide shot\"\n- \"Extreme wide shot\"\n\n### Angle Vocabulary\n- \"Eye level\"\n- \"High angle\" (looking down)\n- \"Low angle\" (looking up)\n- \"Bird's eye view\" (overhead)\n- \"Worm's eye view\" (ground level)\n- \"[X]-degree angle from [direction]\"\n\n### Position Vocabulary\n- **Horizontal:** left, center, right, far left, far right\n- **Vertical:** top, middle, bottom, upper third, lower third\n- **Depth:** foreground, midground, background\n- **Combined:** \"center foreground\", \"left side background\", \"right midground\"\n\n---\n\n## Conversion Methodology\n\n### Step 1: Parse Natural Language\nExtract these semantic elements:\n1. **Setting/Environment** → `scene`\n2. **Main Elements** → `subjects[]`\n3. **Visual Style** → `style`\n4. **Colors Mentioned** → `color_palette` (convert to hex)\n5. **Light Description** → `lighting`\n6. **Emotional Tone** → `mood`\n7. **Background Details** → `background`\n8. **Framing/Layout** → `composition`\n9. **Camera/Photography Terms** → `camera` object\n\n### Step 2: Structure Subjects\n- Identify distinct elements (usually 1-3 subjects)\n- Order by importance: primary → secondary → background\n- Each subject needs `description` (required)\n- Add `position`, `action`, `pose`, `color_palette` as relevant\n\n### Step 3: Extract Technical Parameters\nMap descriptive language to technical specs:\n- \"close up shot\" → `\"distance\": \"Close-up\"`, `\"lens-mm\": 85`\n- \"shallow focus\" → `\"f-number\": \"f/2.8\"`, `\"depth_of_field\": \"Shallow, background blurred\"`\n- \"wide angle\" → `\"lens-mm\": 24`\n- \"low light\" → `\"ISO\": 1600`\n\n### Step 4: Color Conversion\nConvert color descriptions to hex codes:\n- \"red\" → `#FF0000`\n- \"deep blue\" → `#00008B`\n- \"golden yellow\" → `#FFD700`\n- \"charcoal gray\" → `#36454F`\n- \"emerald green\" → `#50C878`\n- \"warm white\" → `#FAF0E6`\n\nCommon color hex reference:\n```\nBlack: #000000          White: #FFFFFF\nRed: #FF0000           Blue: #0000FF\nGreen: #00FF00         Yellow: #FFFF00\nOrange: #FF8C00        Purple: #800080\nPink: #FFC0CB          Brown: #8B4513\nGray: #808080          Charcoal: #36454F\nNavy: #000080          Teal: #008080\nMaroon: #800000        Olive: #808000\n```\n\n### Step 5: Omit Empty Fields\nOnly include fields that have meaningful values. Do not include:\n- Empty strings `\"\"`\n- Empty arrays `[]`\n- Null values\n- Undefined fields\n- Fields you have no information for\n\n---\n\n## Output Format\n\n### Response Structure\nWhen given a natural language prompt, respond with:\n\n1. **Brief Analysis** (2-3 sentences explaining your interpretation)\n2. **Complete JSON** (properly formatted, valid JSON)\n3. **Technical Notes** (optional - any important decisions or alternatives)\n\n### Example Output\n```\nI'm interpreting this as a vintage film photograph of a coffee cup in morning light. \nI've structured it with the café environment as the scene, the coffee cup as the \nprimary subject, and configured camera settings typical of 1960s film photography.\n\n{\n  \"scene\": \"Cozy neighborhood café interior with vintage wood furniture\",\n  \"subjects\": [\n    {\n      \"description\": \"White ceramic coffee cup filled with dark roasted coffee, steam rising\",\n      \"position\": \"center foreground on wooden table\",\n      \"color_palette\": [\"#FFFFFF\", \"#3E2723\"]\n    }\n  ],\n  \"style\": \"Vintage color photography, 1960s aesthetic with warm film tones\",\n  \"lighting\": \"Soft morning sunlight streaming through window from left\",\n  \"mood\": \"Warm, nostalgic, peaceful morning moment\",\n  \"camera\": {\n    \"angle\": \"Slight overhead angle, 30 degrees\",\n    \"distance\": \"Close-up\",\n    \"lens-mm\": 50,\n    \"f-number\": \"f/2.8\",\n    \"ISO\": 400,\n    \"depth_of_field\": \"Shallow, background softly blurred\",\n    \"focus\": \"Sharp focus on coffee cup\"\n  }\n}\n\nTechnical notes: Using 50mm lens for natural perspective, f/2.8 for shallow DOF \ntypical of vintage film, ISO 400 to match common film stocks of that era.\n```\n\n---\n\n## Quality Standards\n\n### Your JSON Must:\n- ✅ Be valid, parseable JSON\n- ✅ Use correct data types (number vs string)\n- ✅ Format f-number as string: `\"f/2.8\"`\n- ✅ Format ISO as number: `400`\n- ✅ Format lens-mm as number: `85`\n- ✅ Use uppercase hex codes: `#FF5733`\n- ✅ Use correct field names (hyphens vs underscores)\n- ✅ Omit empty or irrelevant fields\n- ✅ Include only fields that add value\n- ✅ Have at least one subject with description\n\n### Your JSON Must NOT:\n- ❌ Include fields not in the schema\n- ❌ Use wrong data types\n- ❌ Have syntax errors\n- ❌ Include empty strings or arrays unnecessarily\n- ❌ Mix up field naming conventions\n- ❌ Format f-number as number\n- ❌ Format ISO as string\n- ❌ Use lowercase hex codes\n- ❌ Omit the required `subjects[].description`\n\n---\n\n## Advanced Techniques\n\n### Multi-Subject Composition\nWhen multiple distinct elements:\n```json\n{\n  \"subjects\": [\n    {\n      \"description\": \"Primary subject details\",\n      \"position\": \"center foreground\",\n      \"color_palette\": [\"#HEX1\"]\n    },\n    {\n      \"description\": \"Secondary element details\",\n      \"position\": \"left midground\",\n      \"color_palette\": [\"#HEX2\"]\n    },\n    {\n      \"description\": \"Background element details\",\n      \"position\": \"background\",\n      \"color_palette\": [\"#HEX3\"]\n    }\n  ]\n}\n```\n\n### Era-Specific Technical Matching\nMatch camera settings to described era:\n\n**1950s-1960s:**\n```json\n{\n  \"ISO\": 400,\n  \"style\": \"Vintage film with Kodachrome color palette and visible grain\"\n}\n```\n\n**1980s:**\n```json\n{\n  \"ISO\": 800,\n  \"style\": \"1980s photograph with oversaturated colors and grainy texture\"\n}\n```\n\n**Modern Digital:**\n```json\n{\n  \"ISO\": 200,\n  \"style\": \"Contemporary digital photography with clean processing\"\n}\n```\n\n### Photography Style Inference\nMap style descriptions to technical parameters:\n\n**\"Portrait photography\":**\n```json\n{\n  \"lens-mm\": 85,\n  \"f-number\": \"f/1.8\",\n  \"distance\": \"Medium shot\"\n}\n```\n\n**\"Product photography\":**\n```json\n{\n  \"lens-mm\": 100,\n  \"f-number\": \"f/8\",\n  \"distance\": \"Close-up\"\n}\n```\n\n**\"Landscape photography\":**\n```json\n{\n  \"lens-mm\": 24,\n  \"f-number\": \"f/11\",\n  \"distance\": \"Extreme wide shot\"\n}\n```\n\n**\"Street photography\":**\n```json\n{\n  \"lens-mm\": 35,\n  \"f-number\": \"f/5.6\",\n  \"distance\": \"Full shot\"\n}\n```\n\n---\n\n## Decision-Making Framework\n\n### When to Split Subjects\nSplit into multiple subjects when:\n- Elements are spatially distinct\n- Different color palettes needed\n- Different positions or actions\n- Main subject vs. environmental elements\n\nKeep as one subject when:\n- Elements are unified\n- Part of the same object\n- Single focus of attention\n\n### Style vs. Mood vs. Lighting\n- **Style:** Rendering technique, artistic approach, era, quality\n- **Mood:** Emotional feeling, atmosphere, tone\n- **Lighting:** Technical light sources, direction, characteristics\n\nExample separation:\n```json\n{\n  \"style\": \"Cinematic film photography with anamorphic aspect ratio\",\n  \"mood\": \"Tense, dramatic, suspenseful\",\n  \"lighting\": \"Single harsh spotlight from above creating deep shadows\"\n}\n```\n\n### Camera Object - When to Include\nInclude camera object when:\n- Photography style is specified\n- Technical details are mentioned\n- Specific framing is described\n- Depth of field is important\n\nOmit camera object when:\n- Abstract or illustrated styles\n- Minimal technical requirements\n- Style doesn't imply photography\n\n---\n\n## Common Patterns\n\n### Pattern 1: Simple Product\n```json\n{\n  \"scene\": \"Clean studio environment with minimal backdrop\",\n  \"subjects\": [\n    {\n      \"description\": \"[Product details]\",\n      \"position\": \"center foreground\",\n      \"color_palette\": [\"#HEX1\", \"#HEX2\"]\n    }\n  ],\n  \"style\": \"Professional product photography\",\n  \"lighting\": \"Soft three-point studio lighting\",\n  \"camera\": {\n    \"lens-mm\": 85,\n    \"f-number\": \"f/5.6\",\n    \"distance\": \"Medium shot\"\n  }\n}\n```\n\n### Pattern 2: Character Portrait\n```json\n{\n  \"scene\": \"[Environment description]\",\n  \"subjects\": [\n    {\n      \"description\": \"[Character details]\",\n      \"position\": \"center frame\",\n      \"pose\": \"[Body language]\",\n      \"color_palette\": [\"#HEX1\"]\n    }\n  ],\n  \"style\": \"Portrait photography\",\n  \"mood\": \"[Emotional tone]\",\n  \"lighting\": \"[Light description]\",\n  \"camera\": {\n    \"angle\": \"Eye level\",\n    \"distance\": \"Medium shot\",\n    \"lens-mm\": 85,\n    \"f-number\": \"f/2.8\",\n    \"depth_of_field\": \"Shallow, background blurred\"\n  }\n}\n```\n\n### Pattern 3: Landscape/Environment\n```json\n{\n  \"scene\": \"[Wide environment description]\",\n  \"subjects\": [\n    {\n      \"description\": \"[Key elements if any]\",\n      \"position\": \"[Position in frame]\"\n    }\n  ],\n  \"style\": \"Landscape photography\",\n  \"lighting\": \"[Natural light description]\",\n  \"mood\": \"[Atmospheric feeling]\",\n  \"composition\": \"[Framing technique]\",\n  \"camera\": {\n    \"angle\": \"[View angle]\",\n    \"distance\": \"Wide shot\",\n    \"lens-mm\": 24,\n    \"f-number\": \"f/11\",\n    \"depth_of_field\": \"Deep, everything in focus\"\n  }\n}\n```\n\n---\n\n## Error Prevention Checklist\n\nBefore outputting JSON, verify:\n\n- [ ] JSON is valid (no trailing commas, quotes balanced)\n- [ ] `lens-mm` is number not string\n- [ ] `f-number` is string with format \"f/X.X\"\n- [ ] `ISO` is number not string\n- [ ] Hex codes are uppercase 6-digit format\n- [ ] Field names use correct hyphens/underscores\n- [ ] At least one subject with description\n- [ ] No empty fields included\n- [ ] No non-existent schema fields\n- [ ] Color values in arrays are strings\n- [ ] All strings are properly quoted\n- [ ] All commas are correctly placed\n\n---\n\n## Example Interactions\n\n### Example 1: Simple Request\n**USER:** \"A red apple on a white plate\"\n\n**YOUR RESPONSE:**\n```\nSimple product still life - red apple as primary subject on white plate in clean setup.\n\n{\n  \"scene\": \"Clean minimalist setup with neutral background\",\n  \"subjects\": [\n    {\n      \"description\": \"Fresh red apple with glossy skin and natural stem\",\n      \"position\": \"center on white ceramic plate\",\n      \"color_palette\": [\"#DC143C\", \"#8B0000\"]\n    }\n  ],\n  \"style\": \"Clean product photography with commercial quality\",\n  \"lighting\": \"Soft diffused lighting from above\",\n  \"camera\": {\n    \"distance\": \"Close-up\",\n    \"lens-mm\": 85,\n    \"f-number\": \"f/5.6\"\n  }\n}\n```\n\n### Example 2: Complex Scene\n**USER:** \"A cyberpunk street scene at night with neon signs reflecting in wet pavement, a lone figure in a trench coat walking away from camera\"\n\n**YOUR RESPONSE:**\n```\nCinematic cyberpunk scene with environmental storytelling. Split into urban environment \nand character subject for better control. Camera positioned for dramatic perspective.\n\n{\n  \"scene\": \"Futuristic cyberpunk street at night with towering buildings\",\n  \"subjects\": [\n    {\n      \"description\": \"Lone figure in dark trench coat and hat, silhouette visible\",\n      \"position\": \"center midground walking away from camera\",\n      \"action\": \"Walking away slowly\",\n      \"pose\": \"Back to camera, hunched posture\",\n      \"color_palette\": [\"#1A1A1A\", \"#2C2C2C\"]\n    },\n    {\n      \"description\": \"Vibrant neon signs in kanji and English, holographic advertisements\",\n      \"position\": \"flanking both sides, reflecting in wet ground\",\n      \"color_palette\": [\"#FF00FF\", \"#00FFFF\", \"#FF1493\"]\n    }\n  ],\n  \"style\": \"Cinematic cyberpunk aesthetic with blade runner influences\",\n  \"lighting\": \"Dramatic neon lighting, deep shadows, strong color contrast\",\n  \"mood\": \"Noir, mysterious, dystopian, atmospheric\",\n  \"background\": \"Rain-slicked pavement reflecting neon lights, steam rising from vents\",\n  \"composition\": \"Wide shot with strong leading lines toward vanishing point\",\n  \"camera\": {\n    \"angle\": \"Slight low angle looking forward\",\n    \"distance\": \"Wide shot\",\n    \"lens-mm\": 35,\n    \"f-number\": \"f/2.8\",\n    \"ISO\": 1600,\n    \"depth_of_field\": \"Moderate depth, neon signs creating bokeh in background\",\n    \"focus\": \"Focus on figure, background softly blurred with light streaks\"\n  }\n}\n\nTechnical notes: Higher ISO (1600) for low-light night scene, f/2.8 for bokeh effect \nwith neon lights, 35mm for cinematic field of view typical of this genre.\n```\n\n---\n\n## Response Protocol\n\nFor every user prompt:\n\n1. **Analyze** the natural language quickly\n2. **Extract** all relevant semantic information\n3. **Structure** into appropriate JSON fields\n4. **Verify** formatting rules are followed\n5. **Output** with brief context and technical notes\n6. **Be concise** - no lengthy explanations unless asked\n\n---\n\n## Your Role\n\nYou are a precise, efficient JSON converter. Your goals:\n- Produce immediately usable FLUX.2 JSON prompts\n- Follow schema specifications exactly\n- Convert color descriptions to hex codes\n- Infer appropriate technical camera parameters\n- Omit irrelevant fields\n- Provide valid, clean JSON output\n\n**Every response should be clean, precise JSON that works immediately with FLUX.2.**\n\n---\n\n**Ready to convert natural language directly to FLUX.2 JSON!**"
      ],
      "color": "#232",
      "bgcolor": "#353"
    },
    {
      "id": 155,
      "type": "ShowText|pysssss",
      "pos": [
        4142.565225571682,
        27108.418134117306
      ],
      "size": [
        514.8509017700972,
        636.3010720238053
      ],
      "flags": {},
      "order": 27,
      "mode": 4,
      "inputs": [
        {
          "name": "text",
          "type": "STRING",
          "link": 283
        }
      ],
      "outputs": [
        {
          "name": "STRING",
          "shape": 6,
          "type": "STRING",
          "links": []
        }
      ],
      "properties": {
        "cnr_id": "comfyui-custom-scripts",
        "ver": "aac13aa7ce35b07d43633c3bbe654a38c00d74f5",
        "Node name for S&R": "ShowText|pysssss"
      },
      "widgets_values": [
        "Anime Style, power drifting low-podchair-design motorbike vehicle, female redhead agent lean-back, muscled-windshield, , peaceful tranquility, calm atmosphere, serene mood, , stormy conditions, dramatic clouds, threatening weather, , deep cool shadows, indigo depths, night palette"
      ],
      "color": "#232",
      "bgcolor": "#353"
    },
    {
      "id": 180,
      "type": "DF_Text_Box",
      "pos": [
        4141.746116421071,
        26563.280757370856
      ],
      "size": [
        518.6559354284136,
        425.0972892686041
      ],
      "flags": {},
      "order": 9,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "links": [
            327
          ]
        }
      ],
      "properties": {
        "cnr_id": "derfuu_comfyui_moddednodes",
        "ver": "d0905bed31249f2bd0814c67585cf4fe3c77c015",
        "Node name for S&R": "DF_Text_Box"
      },
      "widgets_values": [
        "Interpreting this as a dynamic anime action shot: a red‑haired female agent carving a power drift on a low, pod‑chair futuristic motorbike, entering frame on a mountain pass. The look is metallic-cool with steel‑blue grading against a dramatic alpine backdrop.\n\n{\n  \"scene\": \"High alpine mountain pass with sweeping switchbacks and cliffs, cold thin air and distant snow-capped peaks\",\n  \"subjects\": [\n    {\n      \"description\": \"Female redhead agent on a low pod-chair design motorbike with a muscular aerodynamic windshield\",\n      \"position\": \"entering from right foreground, angled toward center\",\n      \"action\": \"Power drifting into frame, rear tire throwing dust and snow spray\",\n      \"pose\": \"Leaning back in the low seat, one hand firm on the throttle\",\n      \"color_palette\": [\"#DC143C\", \"#000000\", \"#4682B4\", \"#C0C0C0\"]\n    },\n    {\n      \"description\": \"Mountain road with guardrails and sweeping S-curve\",\n      \"position\": \"midground leading toward left background\",\n      \"color_palette\": [\"#A3D5FF\", \"#FFFFFF\", \"#2A3439\", \"#8C92AC\", \"#4682B4\"]\n    }\n  ],\n  \"style\": \"Anime action illustration with high-detail cel shading and steel-blue color grading\",\n  \"color_palette\": [\"#4682B4\", \"#C0C0C0\", \"#2A3439\", \"#8C92AC\", \"#DC143C\", \"#FFFFFF\", \"#000000\"],\n  \"lighting\": \"Crisp alpine daylight with cool steel-blue grade; strong highlights on metallic surfaces and rim light on edges\",\n  \"mood\": \"Kinetic, tense, modern and high-tech\",\n  \"background\": \"Elevated alpine landscape with dramatic ridgelines, thin mist and distant glaciers under a clear cool sky\",\n  \"composition\": \"Dynamic wide-angle tracking frame, slight Dutch tilt, strong leading lines of the road and spray arcs; subject entering from right third\",\n  \"camera\": {\n    \"angle\": \"Low angle three-quarter front, tracking\",\n    \"distance\": \"Wide shot\",\n    \"lens-mm\": 24,\n    \"f-number\": \"f/4\",\n    \"ISO\": 200,\n    \"depth_of_field\": \"Moderate, rider and bike sharp with background slightly softened; motion streaks accent speed\",\n    \"focus\": \"Primary focus on rider and motorbike\"\n  }\n}\n\nTechnical notes: 24mm for exaggerated perspective and environment scale; f/4 balances subject sharpness with slight background separation; ISO 200 suits bright alpine daylight while preserving clean tones for the metallic-cool grade."
      ]
    },
    {
      "id": 134,
      "type": "LoadImage",
      "pos": [
        2733.130864237744,
        27241.61775780609
      ],
      "size": [
        274.080078125,
        314
      ],
      "flags": {},
      "order": 10,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            258
          ]
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": null
        }
      ],
      "title": "Character",
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.74",
        "Node name for S&R": "LoadImage"
      },
      "widgets_values": [
        "thorra2.png",
        "image"
      ]
    },
    {
      "id": 136,
      "type": "LoadImage",
      "pos": [
        3043.130864237744,
        27241.61775780609
      ],
      "size": [
        274.080078125,
        314
      ],
      "flags": {},
      "order": 11,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            260
          ]
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": null
        }
      ],
      "title": "bike",
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.74",
        "Node name for S&R": "LoadImage"
      },
      "widgets_values": [
        "redesigning-kanedas-bike-from-the-classic-sci-fi-movie-akira-1-6131d8c40dd63.jpg",
        "image"
      ]
    },
    {
      "id": 183,
      "type": "LoadImage",
      "pos": [
        2742.8234579962286,
        27829.367572788666
      ],
      "size": [
        274.080078125,
        314
      ],
      "flags": {},
      "order": 12,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            328
          ]
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": null
        }
      ],
      "title": "First Frame",
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.74",
        "Node name for S&R": "LoadImage"
      },
      "widgets_values": [
        "id6_00019_.png",
        "image"
      ]
    },
    {
      "id": 184,
      "type": "ImageScaleToTotalPixels",
      "pos": [
        2742.8234579962286,
        27699.367572788666
      ],
      "size": [
        270,
        82
      ],
      "flags": {},
      "order": 23,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 328
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            333
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.74",
        "Node name for S&R": "ImageScaleToTotalPixels"
      },
      "widgets_values": [
        "nearest-exact",
        1
      ]
    },
    {
      "id": 181,
      "type": "ByteDanceImageToVideoNode",
      "pos": [
        4764.105754379558,
        26521.073414713006
      ],
      "size": [
        400,
        326
      ],
      "flags": {},
      "order": 26,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 338
        },
        {
          "name": "prompt",
          "type": "STRING",
          "widget": {
            "name": "prompt"
          },
          "link": 327
        }
      ],
      "outputs": [
        {
          "name": "VIDEO",
          "type": "VIDEO",
          "links": [
            326
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.74",
        "Node name for S&R": "ByteDanceImageToVideoNode"
      },
      "widgets_values": [
        "seedance-1-0-pro-250528",
        "",
        "1080p",
        "adaptive",
        8,
        837493037,
        "randomize",
        false,
        false
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 182,
      "type": "SaveVideo",
      "pos": [
        5264.45222355285,
        26519.412805463795
      ],
      "size": [
        2004.3590709337614,
        1246.1470942240958
      ],
      "flags": {},
      "order": 28,
      "mode": 0,
      "inputs": [
        {
          "name": "video",
          "type": "VIDEO",
          "link": 326
        },
        {
          "name": "filename_prefix",
          "type": "STRING",
          "widget": {
            "name": "filename_prefix"
          },
          "link": 339
        }
      ],
      "outputs": [],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.74",
        "Node name for S&R": "SaveVideo"
      },
      "widgets_values": [
        "video/ComfyUI",
        "auto",
        "auto"
      ]
    },
    {
      "id": 160,
      "type": "ProjectFilePathNode",
      "pos": [
        4882.714349572607,
        26906.02893704496
      ],
      "size": [
        270,
        154
      ],
      "flags": {},
      "order": 16,
      "mode": 0,
      "inputs": [
        {
          "name": "project_name",
          "type": "STRING",
          "widget": {
            "name": "project_name"
          },
          "link": 302
        }
      ],
      "outputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "links": [
            339
          ]
        }
      ],
      "properties": {
        "cnr_id": "djz-nodes",
        "ver": "58baa825b8eb2055b9841665cb662bad9689700c",
        "Node name for S&R": "ProjectFilePathNode"
      },
      "widgets_values": [
        "Seedream4",
        "Thorra-bike",
        "flux2json",
        "vid",
        "auto"
      ],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 186,
      "type": "Label (rgthree)",
      "pos": [
        1718.6527345359805,
        26271.89709707532
      ],
      "size": [
        1184.1064453125,
        150
      ],
      "flags": {
        "allow_interaction": true
      },
      "order": 13,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "title": "Seedance Pro i2v",
      "properties": {
        "fontSize": 150,
        "fontFamily": "Arial",
        "fontColor": "#ffffff",
        "textAlign": "left",
        "backgroundColor": "transparent",
        "padding": 0,
        "borderRadius": 0
      },
      "color": "#fff0",
      "bgcolor": "#fff0"
    },
    {
      "id": 188,
      "type": "Label (rgthree)",
      "pos": [
        1720.7731208342095,
        26422.43235949888
      ],
      "size": [
        1480.46875,
        100
      ],
      "flags": {
        "allow_interaction": true
      },
      "order": 14,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "title": "Drift Johnson | scuffedepoch.com",
      "properties": {
        "fontSize": 100,
        "fontFamily": "Arial",
        "fontColor": "#ffffff",
        "textAlign": "left",
        "backgroundColor": "transparent",
        "padding": 0,
        "borderRadius": 0
      },
      "color": "#fff0",
      "bgcolor": "#fff0"
    },
    {
      "id": 187,
      "type": "Note",
      "pos": [
        1720.9249550654297,
        26576.156522928053
      ],
      "size": [
        493.692138671875,
        572.3177490234375
      ],
      "flags": {},
      "order": 15,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "properties": {},
      "widgets_values": [
        "APInodes-seedance-pro-i2v-V20\n\nVideo: https://www.youtube.com/@ScuffedEpoch\nWorkflow: https://civitai.com/user/driftjohnson\nhttps://www.scuffedepoch.com\n\n\n\n\n[discord early editions]\nhttps://discord.com/invite/uubQXhwzkj \n"
      ],
      "color": "#432",
      "bgcolor": "#653"
    }
  ],
  "links": [
    [
      258,
      134,
      0,
      135,
      0,
      "IMAGE"
    ],
    [
      260,
      136,
      0,
      137,
      0,
      "IMAGE"
    ],
    [
      281,
      157,
      0,
      156,
      2,
      "OPENAI_CHAT_CONFIG"
    ],
    [
      283,
      156,
      0,
      155,
      0,
      "STRING"
    ],
    [
      302,
      167,
      0,
      160,
      0,
      "STRING"
    ],
    [
      303,
      168,
      0,
      156,
      3,
      "STRING"
    ],
    [
      304,
      165,
      0,
      168,
      0,
      "STRING"
    ],
    [
      308,
      170,
      1,
      171,
      0,
      "INT"
    ],
    [
      314,
      173,
      0,
      168,
      3,
      "STRING"
    ],
    [
      315,
      174,
      0,
      172,
      0,
      "INT"
    ],
    [
      316,
      175,
      0,
      169,
      0,
      "INT"
    ],
    [
      317,
      176,
      0,
      168,
      2,
      "STRING"
    ],
    [
      320,
      177,
      0,
      168,
      1,
      "STRING"
    ],
    [
      326,
      181,
      0,
      182,
      0,
      "VIDEO"
    ],
    [
      327,
      180,
      0,
      181,
      1,
      "STRING"
    ],
    [
      328,
      183,
      0,
      184,
      0,
      "IMAGE"
    ],
    [
      333,
      184,
      0,
      185,
      0,
      "IMAGE"
    ],
    [
      334,
      135,
      0,
      185,
      1,
      "IMAGE"
    ],
    [
      335,
      137,
      0,
      185,
      2,
      "IMAGE"
    ],
    [
      336,
      185,
      0,
      156,
      0,
      "IMAGE"
    ],
    [
      338,
      185,
      0,
      181,
      0,
      "IMAGE"
    ],
    [
      339,
      160,
      0,
      182,
      1,
      "STRING"
    ]
  ],
  "groups": [
    {
      "id": 13,
      "title": "ID image inputs",
      "bounding": [
        2723.130864237744,
        27028.01775780609,
        786.6236328125001,
        537.6
      ],
      "color": "#3f789e",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 14,
      "title": "Prompt Varationator",
      "bounding": [
        2724.0109578521165,
        26576.575879871736,
        783.4892298714076,
        414.2882713025392
      ],
      "color": "#3f789e",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 15,
      "title": "Direct JSON Prompt",
      "bounding": [
        4131.746116421071,
        26489.680757370857,
        538.6559354284136,
        508.6972892686041
      ],
      "color": "#8A8",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 16,
      "title": "First Frame Input",
      "bounding": [
        2701.097272052803,
        27603.55924262828,
        374.981852280735,
        562.4988045377686
      ],
      "color": "#8A8",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 17,
      "title": "GPT5 prompt to JSON agent",
      "bounding": [
        3586.345237188685,
        27033.50713469816,
        1081.0708901530943,
        721.2120714429526
      ],
      "color": "#8A8",
      "font_size": 24,
      "flags": {}
    }
  ],
  "config": {},
  "extra": {
    "ds": {
      "scale": 1.635079908265807,
      "offset": [
        -1551.9829841199467,
        -26234.74352824977
      ]
    },
    "frontendVersion": "1.34.2",
    "VHS_latentpreview": false,
    "VHS_latentpreviewrate": 0,
    "VHS_MetadataImage": true,
    "VHS_KeepIntermediate": true
  },
  "version": 0.4
}